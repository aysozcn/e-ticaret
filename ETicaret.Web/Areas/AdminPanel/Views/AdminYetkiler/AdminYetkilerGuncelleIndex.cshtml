@using ETicaret.Core.DTO
@using ETicaret.Core.ETicaretDatabase
@model Yetkiler

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Yetki Güncelle</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.Id)

        <div class="form-group">
            <label asp-for="YetkiAdi"></label>
            <input name="YetkiAdi" asp-for="YetkiAdi" type="text" class="form-control" value="@Model.YetkiAdi" placeholder="Yetki Adı">
            <span asp-validation-for="YetkiAdi" class="text-danger"></span>
        </div>
       
        <div class="form-group">
            <div class="card card-info card-outline">
                <div class="card-header">
                    <h5 class="card-title">Erişim Alanları</h5>
                </div>
                <div class="card-body">
                    @foreach (var item in ViewData["erisimAlani"] as List<ErisimAlanlariDTO>)
                    {
                        <div class="custom-control custom-checkbox">
                            @{
                                var isChecked = false;
                                @foreach (var item2 in ViewData["yetkiErisim"] as List<YetkiErisim>)
                                {
                                    if (item2.ErisimAlaniId == item.Id && item2.YetkiId == Model.Id)
                                    {
                                        isChecked = true;
                                        break;
                                    }
                                }
                            }
                            <input class="custom-control-input" type="checkbox" id="customCheckbox_@item.Id" name="selectedSayfalar" value="@item.Id" @(isChecked ? "checked" : "") />
                            <label for="customCheckbox_@item.Id" class="custom-control-label">@item.ControllerAdi</label>
                        </div>
                    }
                </div>
            </div>

        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Yetki Güncelle" class="btn btn-warning" />
            </div>
        </div>
    </div>
}
